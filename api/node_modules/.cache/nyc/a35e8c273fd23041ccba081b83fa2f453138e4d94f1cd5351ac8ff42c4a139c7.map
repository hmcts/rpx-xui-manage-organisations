{"version":3,"file":"/home/alan/Cloud/workspaces/prd-pui-manager/api/lib/util.ts","sources":["/home/alan/Cloud/workspaces/prd-pui-manager/api/lib/util.ts"],"names":[],"mappings":";;AAEA,4BACI,OAAY,EACZ,OAAe,EACf,GAA4B,EAC5B,MAAM,EACN,WAA4B;IAA5B,4BAAA,EAAA,kBAA4B;IAC5B,OAAO,OAAO;SACT,IAAI,CAAC,UAAA,IAAI;QACN,OAAO,IAAI,CAAA;IACf,CAAC,CAAC;SACD,KAAK,CAAC,UAAA,GAAG;QACN,IAAM,GAAG,GAAG,KAAG,OAAS,CAAA;QACxB,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;QAEjB,IAAI,WAAW,EAAE;YACb,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;SAC9C;QAED,OAAO,IAAI,CAAA;IACf,CAAC,CAAC,CAAA;AACV,CAAC;AApBD,gDAoBC;AAED,cAAqB,KAAK,EAAE,SAAS;IACjC,KAAK,IAAM,IAAI,IAAI,KAAK,EAAE;QACtB,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;YACb,IAAM,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAA;YACrC,IAAI,MAAM,EAAE;gBACR,OAAO,MAAM,CAAA;aAChB;SACJ;KACJ;IACD,OAAO,IAAI,CAAA;AACf,CAAC;AAVD,oBAUC;AAED,qBAA4B,OAAe;IACvC,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;AAC1C,CAAC;AAFD,kCAEC;AAED,qBAA4B,MAAW,EAAE,OAAe;IACpD,IAAM,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,CAAA;IAC3C,OAAO,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAA;AAC/B,CAAC;AAHD,kCAGC;AAED,gBAAuB,MAAW,EAAE,OAAe,EAAE,WAAmB;IAAnB,4BAAA,EAAA,mBAAmB;IACpE,IAAM,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAChD,IAAI,MAAM,EAAE;QACR,IAAI,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE;YACvC,IAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAA;YAC3B,QAAQ,CAAC,KAAK,EAAE,CAAA;YAChB,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE;gBACjB,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,WAAW,CAAC,CAAA;aAClE;iBAAM;gBACH,OAAO,KAAK,CAAA;aACf;SACJ;aAAM;YACH,OAAO,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAA;SACrC;KACJ;SAAM;QACH,OAAO,KAAK,CAAA;KACf;AACL,CAAC;AAjBD,wBAiBC;AAED,iBAAwB,GAAW,EAAE,MAAc;IAC/C,OAAO,GAAG,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAI,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,QAAK,CAAC,CAAC,CAAC,GAAG,CAAA;AACvE,CAAC;AAFD,0BAEC;AAED,kBAAyB,CAAC;IACtB,OAAO,CAAC,KAAK,IAAI,IAAI,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,KAAK,CAAA;AAC5E,CAAC;AAFD,4BAEC","sourcesContent":["import * as express from 'express'\n\nexport function asyncReturnOrError(\n    promise: any,\n    message: string,\n    res: express.Response | null,\n    logger,\n    setResponse: boolean  = true): any {\n    return promise\n        .then(data => {\n            return data\n        })\n        .catch(err => {\n            const msg = `${message}`\n            logger.error(msg)\n\n            if (setResponse) {\n                res.status(err.statusCode || 500).send(msg)\n            }\n\n            return null\n        })\n}\n\nexport function some(array, predicate) {\n    for (const item in array) {\n        if (array[item]) {\n            const result = predicate(array[item])\n            if (result) {\n                return result\n            }\n        }\n    }\n    return null\n}\n\nexport function dotNotation(nestled: string) {\n    return nestled.replace(/[\\[\\]]/g, '.')\n}\n\nexport function valueOrNull(object: any, nestled: string) {\n    const value = exists(object, nestled, true)\n    return value ? value : null\n}\n\nexport function exists(object: any, nestled: string, returnValue = false) {\n    const dotArray = dotNotation(nestled).split('.')\n    if (object) {\n        if (dotArray.length && dotArray[0] !== '') {\n            const current = dotArray[0]\n            dotArray.shift()\n            if (object[current]) {\n                return exists(object[current], dotArray.join('.'), returnValue)\n            } else {\n                return false\n            }\n        } else {\n            return returnValue ? object : true\n        }\n    } else {\n        return false\n    }\n}\n\nexport function shorten(str: string, maxLen: number): string {\n    return str.length > maxLen ? `${str.substring(0, maxLen)}...` : str\n}\n\nexport function isObject(o) {\n    return o !== null && typeof o === 'object' && Array.isArray(o) === false\n}\n"]}