"use strict";var cov_129l9hs4hp=function(){var path="/home/alan/Cloud/workspaces/prd-pui-manager/api/lib/log4jui.ts";var hash="12a7e19de0365d8b9e7e1308812aaef5f09ccd9a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/alan/Cloud/workspaces/prd-pui-manager/api/lib/log4jui.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:13},end:{line:3,column:30}},"2":{start:{line:4,column:15},end:{line:4,column:34}},"3":{start:{line:5,column:17},end:{line:5,column:45}},"4":{start:{line:6,column:20},end:{line:6,column:44}},"5":{start:{line:7,column:13},end:{line:7,column:17}},"6":{start:{line:10,column:4},end:{line:10,column:40}},"7":{start:{line:11,column:4},end:{line:11,column:53}},"8":{start:{line:12,column:4},end:{line:19,column:6}},"9":{start:{line:21,column:0},end:{line:21,column:30}},"10":{start:{line:23,column:19},end:{line:23,column:21}},"11":{start:{line:24,column:4},end:{line:26,column:5}},"12":{start:{line:24,column:18},end:{line:24,column:19}},"13":{start:{line:25,column:8},end:{line:25,column:37}},"14":{start:{line:27,column:22},end:{line:27,column:24}},"15":{start:{line:28,column:4},end:{line:31,column:5}},"16":{start:{line:28,column:18},end:{line:28,column:19}},"17":{start:{line:28,column:34},end:{line:28,column:42}},"18":{start:{line:29,column:22},end:{line:29,column:36}},"19":{start:{line:30,column:8},end:{line:30,column:31}},"20":{start:{line:32,column:19},end:{line:32,column:40}},"21":{start:{line:33,column:4},end:{line:35,column:5}},"22":{start:{line:34,column:8},end:{line:34,column:97}},"23":{start:{line:36,column:4},end:{line:36,column:35}},"24":{start:{line:39,column:19},end:{line:39,column:21}},"25":{start:{line:40,column:4},end:{line:42,column:5}},"26":{start:{line:40,column:18},end:{line:40,column:19}},"27":{start:{line:41,column:8},end:{line:41,column:37}},"28":{start:{line:43,column:22},end:{line:43,column:24}},"29":{start:{line:44,column:4},end:{line:47,column:5}},"30":{start:{line:44,column:18},end:{line:44,column:19}},"31":{start:{line:44,column:34},end:{line:44,column:42}},"32":{start:{line:45,column:22},end:{line:45,column:36}},"33":{start:{line:46,column:8},end:{line:46,column:31}},"34":{start:{line:48,column:4},end:{line:48,column:35}},"35":{start:{line:51,column:19},end:{line:51,column:21}},"36":{start:{line:52,column:4},end:{line:54,column:5}},"37":{start:{line:52,column:18},end:{line:52,column:19}},"38":{start:{line:53,column:8},end:{line:53,column:37}},"39":{start:{line:55,column:22},end:{line:55,column:24}},"40":{start:{line:56,column:4},end:{line:59,column:5}},"41":{start:{line:56,column:18},end:{line:56,column:19}},"42":{start:{line:56,column:34},end:{line:56,column:42}},"43":{start:{line:57,column:22},end:{line:57,column:36}},"44":{start:{line:58,column:8},end:{line:58,column:31}},"45":{start:{line:60,column:4},end:{line:60,column:36}},"46":{start:{line:63,column:4},end:{line:65,column:5}},"47":{start:{line:64,column:8},end:{line:64,column:47}},"48":{start:{line:68,column:19},end:{line:68,column:21}},"49":{start:{line:69,column:4},end:{line:71,column:5}},"50":{start:{line:69,column:18},end:{line:69,column:19}},"51":{start:{line:70,column:8},end:{line:70,column:37}},"52":{start:{line:72,column:22},end:{line:72,column:24}},"53":{start:{line:73,column:4},end:{line:76,column:5}},"54":{start:{line:73,column:18},end:{line:73,column:19}},"55":{start:{line:73,column:34},end:{line:73,column:42}},"56":{start:{line:74,column:22},end:{line:74,column:36}},"57":{start:{line:75,column:8},end:{line:75,column:31}},"58":{start:{line:77,column:19},end:{line:77,column:40}},"59":{start:{line:78,column:4},end:{line:80,column:5}},"60":{start:{line:79,column:8},end:{line:79,column:115}},"61":{start:{line:81,column:4},end:{line:81,column:36}},"62":{start:{line:82,column:4},end:{line:84,column:5}},"63":{start:{line:83,column:8},end:{line:83,column:49}}},fnMap:{"0":{name:"getLogger",decl:{start:{line:9,column:9},end:{line:9,column:18}},loc:{start:{line:9,column:29},end:{line:20,column:1}},line:9},"1":{name:"info",decl:{start:{line:22,column:9},end:{line:22,column:13}},loc:{start:{line:22,column:16},end:{line:37,column:1}},line:22},"2":{name:"warn",decl:{start:{line:38,column:9},end:{line:38,column:13}},loc:{start:{line:38,column:16},end:{line:49,column:1}},line:38},"3":{name:"debug",decl:{start:{line:50,column:9},end:{line:50,column:14}},loc:{start:{line:50,column:17},end:{line:61,column:1}},line:50},"4":{name:"trackRequest",decl:{start:{line:62,column:9},end:{line:62,column:21}},loc:{start:{line:62,column:27},end:{line:66,column:1}},line:62},"5":{name:"error",decl:{start:{line:67,column:9},end:{line:67,column:14}},loc:{start:{line:67,column:17},end:{line:85,column:1}},line:67}},branchMap:{"0":{loc:{start:{line:11,column:19},end:{line:11,column:52}},type:"binary-expr",locations:[{start:{line:11,column:19},end:{line:11,column:43}},{start:{line:11,column:47},end:{line:11,column:52}}],line:11},"1":{loc:{start:{line:33,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:35,column:5}},{start:{line:33,column:4},end:{line:35,column:5}}],line:33},"2":{loc:{start:{line:63,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:65,column:5}},{start:{line:63,column:4},end:{line:65,column:5}}],line:63},"3":{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:78,column:4},end:{line:80,column:5}}],line:78},"4":{loc:{start:{line:82,column:4},end:{line:84,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:84,column:5}},{start:{line:82,column:4},end:{line:84,column:5}}],line:82},"5":{loc:{start:{line:82,column:8},end:{line:82,column:84}},type:"binary-expr",locations:[{start:{line:82,column:8},end:{line:82,column:44}},{start:{line:82,column:48},end:{line:82,column:84}}],line:82}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"12a7e19de0365d8b9e7e1308812aaef5f09ccd9a"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_129l9hs4hp.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var log4js=(cov_129l9hs4hp.s[1]++,require("log4js"));var config_1=(cov_129l9hs4hp.s[2]++,require("./config"));var errorStack=(cov_129l9hs4hp.s[3]++,require("../lib/errorStack"));var appInsights_1=(cov_129l9hs4hp.s[4]++,require("./appInsights"));var logger=(cov_129l9hs4hp.s[5]++,null);// This is done to mimic log4js calls
function getLogger(category){cov_129l9hs4hp.f[0]++;cov_129l9hs4hp.s[6]++;logger=log4js.getLogger(category);cov_129l9hs4hp.s[7]++;logger.level=(cov_129l9hs4hp.b[0][0]++,config_1.default.logging)||(cov_129l9hs4hp.b[0][1]++,'off');cov_129l9hs4hp.s[8]++;return{_logger:logger,debug:debug,error:error,info:info,trackRequest:trackRequest,warn:warn};}cov_129l9hs4hp.s[9]++;exports.getLogger=getLogger;function info(){cov_129l9hs4hp.f[1]++;var messages=(cov_129l9hs4hp.s[10]++,[]);cov_129l9hs4hp.s[11]++;for(var _i=(cov_129l9hs4hp.s[12]++,0);_i<arguments.length;_i++){cov_129l9hs4hp.s[13]++;messages[_i]=arguments[_i];}var fullMessage=(cov_129l9hs4hp.s[14]++,'');cov_129l9hs4hp.s[15]++;for(var _a=(cov_129l9hs4hp.s[16]++,0),messages_1=(cov_129l9hs4hp.s[17]++,messages);_a<messages_1.length;_a++){var message=(cov_129l9hs4hp.s[18]++,messages_1[_a]);cov_129l9hs4hp.s[19]++;fullMessage+=message;}var category=(cov_129l9hs4hp.s[20]++,this._logger.category);cov_129l9hs4hp.s[21]++;if(appInsights_1.client){cov_129l9hs4hp.b[1][0]++;cov_129l9hs4hp.s[22]++;appInsights_1.client.trackTrace({message:"[INFO] "+category+" - "+fullMessage});}else{cov_129l9hs4hp.b[1][1]++;}cov_129l9hs4hp.s[23]++;this._logger.info(fullMessage);}function warn(){cov_129l9hs4hp.f[2]++;var messages=(cov_129l9hs4hp.s[24]++,[]);cov_129l9hs4hp.s[25]++;for(var _i=(cov_129l9hs4hp.s[26]++,0);_i<arguments.length;_i++){cov_129l9hs4hp.s[27]++;messages[_i]=arguments[_i];}var fullMessage=(cov_129l9hs4hp.s[28]++,'');cov_129l9hs4hp.s[29]++;for(var _a=(cov_129l9hs4hp.s[30]++,0),messages_2=(cov_129l9hs4hp.s[31]++,messages);_a<messages_2.length;_a++){var message=(cov_129l9hs4hp.s[32]++,messages_2[_a]);cov_129l9hs4hp.s[33]++;fullMessage+=message;}cov_129l9hs4hp.s[34]++;this._logger.warn(fullMessage);}function debug(){cov_129l9hs4hp.f[3]++;var messages=(cov_129l9hs4hp.s[35]++,[]);cov_129l9hs4hp.s[36]++;for(var _i=(cov_129l9hs4hp.s[37]++,0);_i<arguments.length;_i++){cov_129l9hs4hp.s[38]++;messages[_i]=arguments[_i];}var fullMessage=(cov_129l9hs4hp.s[39]++,'');cov_129l9hs4hp.s[40]++;for(var _a=(cov_129l9hs4hp.s[41]++,0),messages_3=(cov_129l9hs4hp.s[42]++,messages);_a<messages_3.length;_a++){var message=(cov_129l9hs4hp.s[43]++,messages_3[_a]);cov_129l9hs4hp.s[44]++;fullMessage+=message;}cov_129l9hs4hp.s[45]++;this._logger.debug(fullMessage);}function trackRequest(obj){cov_129l9hs4hp.f[4]++;cov_129l9hs4hp.s[46]++;if(appInsights_1.client){cov_129l9hs4hp.b[2][0]++;cov_129l9hs4hp.s[47]++;appInsights_1.client.trackRequest(obj);}else{cov_129l9hs4hp.b[2][1]++;}}function error(){cov_129l9hs4hp.f[5]++;var messages=(cov_129l9hs4hp.s[48]++,[]);cov_129l9hs4hp.s[49]++;for(var _i=(cov_129l9hs4hp.s[50]++,0);_i<arguments.length;_i++){cov_129l9hs4hp.s[51]++;messages[_i]=arguments[_i];}var fullMessage=(cov_129l9hs4hp.s[52]++,'');cov_129l9hs4hp.s[53]++;for(var _a=(cov_129l9hs4hp.s[54]++,0),messages_4=(cov_129l9hs4hp.s[55]++,messages);_a<messages_4.length;_a++){var message=(cov_129l9hs4hp.s[56]++,messages_4[_a]);cov_129l9hs4hp.s[57]++;fullMessage+=message;}var category=(cov_129l9hs4hp.s[58]++,this._logger.category);cov_129l9hs4hp.s[59]++;if(appInsights_1.client){cov_129l9hs4hp.b[3][0]++;cov_129l9hs4hp.s[60]++;appInsights_1.client.trackException({exception:new Error("[ERROR] "+category+" - "+fullMessage)});}else{cov_129l9hs4hp.b[3][1]++;}cov_129l9hs4hp.s[61]++;this._logger.error(fullMessage);cov_129l9hs4hp.s[62]++;if((cov_129l9hs4hp.b[5][0]++,config_1.default.logging==='debug')||(cov_129l9hs4hp.b[5][1]++,config_1.default.logging==='error')){cov_129l9hs4hp.b[4][0]++;cov_129l9hs4hp.s[63]++;errorStack.push([category,fullMessage]);}else{cov_129l9hs4hp.b[4][1]++;}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYWxhbi9DbG91ZC93b3Jrc3BhY2VzL3ByZC1wdWktbWFuYWdlci9hcGkvbGliL2xvZzRqdWkudHMiLCJzb3VyY2VzIjpbIi9ob21lL2FsYW4vQ2xvdWQvd29ya3NwYWNlcy9wcmQtcHVpLW1hbmFnZXIvYXBpL2xpYi9sb2c0anVpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQWdDO0FBQ2hDLG1DQUE2QjtBQUM3Qiw4Q0FBK0M7QUFDL0MsNkNBQXNDO0FBR3RDLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQTtBQUVqQixxQ0FBcUM7QUFFckMsbUJBQTBCLFFBQWdCO0lBQ3RDLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQ25DLE1BQU0sQ0FBQyxLQUFLLEdBQUcsZ0JBQU0sQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFBO0lBRXRDLE9BQU87UUFDSCxPQUFPLEVBQUUsTUFBTTtRQUNmLEtBQUssT0FBQTtRQUNMLEtBQUssT0FBQTtRQUNMLElBQUksTUFBQTtRQUNKLFlBQVksY0FBQTtRQUNaLElBQUksTUFBQTtLQUNQLENBQUE7QUFDTCxDQUFDO0FBWkQsOEJBWUM7QUFFRDtJQUFjLGtCQUFrQjtTQUFsQixVQUFrQixFQUFsQixxQkFBa0IsRUFBbEIsSUFBa0I7UUFBbEIsNkJBQWtCOztJQUM1QixJQUFJLFdBQVcsR0FBRyxFQUFFLENBQUE7SUFFcEIsS0FBc0IsVUFBUSxFQUFSLHFCQUFRLEVBQVIsc0JBQVEsRUFBUixJQUFRLEVBQUU7UUFBM0IsSUFBTSxPQUFPLGlCQUFBO1FBQ2QsV0FBVyxJQUFJLE9BQU8sQ0FBQTtLQUN6QjtJQUVELElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFBO0lBQ3RDLElBQUksb0JBQU0sRUFBRTtRQUNSLG9CQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsT0FBTyxFQUFFLFlBQVUsUUFBUSxXQUFNLFdBQWEsRUFBRSxDQUFDLENBQUE7S0FDeEU7SUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUNsQyxDQUFDO0FBRUQ7SUFBYyxrQkFBa0I7U0FBbEIsVUFBa0IsRUFBbEIscUJBQWtCLEVBQWxCLElBQWtCO1FBQWxCLDZCQUFrQjs7SUFDNUIsSUFBSSxXQUFXLEdBQUcsRUFBRSxDQUFBO0lBRXBCLEtBQXNCLFVBQVEsRUFBUixxQkFBUSxFQUFSLHNCQUFRLEVBQVIsSUFBUSxFQUFFO1FBQTNCLElBQU0sT0FBTyxpQkFBQTtRQUNkLFdBQVcsSUFBSSxPQUFPLENBQUE7S0FDekI7SUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUNsQyxDQUFDO0FBRUQ7SUFBZSxrQkFBa0I7U0FBbEIsVUFBa0IsRUFBbEIscUJBQWtCLEVBQWxCLElBQWtCO1FBQWxCLDZCQUFrQjs7SUFDN0IsSUFBSSxXQUFXLEdBQUcsRUFBRSxDQUFBO0lBRXBCLEtBQXNCLFVBQVEsRUFBUixxQkFBUSxFQUFSLHNCQUFRLEVBQVIsSUFBUSxFQUFFO1FBQTNCLElBQU0sT0FBTyxpQkFBQTtRQUNkLFdBQVcsSUFBSSxPQUFPLENBQUE7S0FDekI7SUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQTtBQUNuQyxDQUFDO0FBRUQsc0JBQXNCLEdBQVE7SUFDMUIsSUFBSSxvQkFBTSxFQUFFO1FBQ1Isb0JBQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUE7S0FDM0I7QUFDTCxDQUFDO0FBRUQ7SUFBZSxrQkFBa0I7U0FBbEIsVUFBa0IsRUFBbEIscUJBQWtCLEVBQWxCLElBQWtCO1FBQWxCLDZCQUFrQjs7SUFDN0IsSUFBSSxXQUFXLEdBQUcsRUFBRSxDQUFBO0lBRXBCLEtBQXNCLFVBQVEsRUFBUixxQkFBUSxFQUFSLHNCQUFRLEVBQVIsSUFBUSxFQUFFO1FBQTNCLElBQU0sT0FBTyxpQkFBQTtRQUNkLFdBQVcsSUFBSSxPQUFPLENBQUE7S0FDekI7SUFFRCxJQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQTtJQUN0QyxJQUFJLG9CQUFNLEVBQUU7UUFDUixvQkFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLEtBQUssQ0FBQyxhQUFXLFFBQVEsV0FBTSxXQUFhLENBQUMsRUFBRSxDQUFDLENBQUE7S0FDMUY7SUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQTtJQUUvQixJQUFJLGdCQUFNLENBQUMsT0FBTyxLQUFLLE9BQU8sSUFBSSxnQkFBTSxDQUFDLE9BQU8sS0FBSyxPQUFPLEVBQUU7UUFDMUQsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFBO0tBQzNDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGxvZzRqcyBmcm9tICdsb2c0anMnXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJ1xuaW1wb3J0ICogYXMgZXJyb3JTdGFjayBmcm9tICcuLi9saWIvZXJyb3JTdGFjaydcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gJy4vYXBwSW5zaWdodHMnXG5cblxubGV0IGxvZ2dlciA9IG51bGxcblxuLy8gVGhpcyBpcyBkb25lIHRvIG1pbWljIGxvZzRqcyBjYWxsc1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKGNhdGVnb3J5OiBzdHJpbmcpIHtcbiAgICBsb2dnZXIgPSBsb2c0anMuZ2V0TG9nZ2VyKGNhdGVnb3J5KVxuICAgIGxvZ2dlci5sZXZlbCA9IGNvbmZpZy5sb2dnaW5nIHx8ICdvZmYnXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBfbG9nZ2VyOiBsb2dnZXIsXG4gICAgICAgIGRlYnVnLFxuICAgICAgICBlcnJvcixcbiAgICAgICAgaW5mbyxcbiAgICAgICAgdHJhY2tSZXF1ZXN0LFxuICAgICAgICB3YXJuLFxuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5mbyguLi5tZXNzYWdlczogYW55W10pIHtcbiAgICBsZXQgZnVsbE1lc3NhZ2UgPSAnJ1xuXG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGZ1bGxNZXNzYWdlICs9IG1lc3NhZ2VcbiAgICB9XG5cbiAgICBjb25zdCBjYXRlZ29yeSA9IHRoaXMuX2xvZ2dlci5jYXRlZ29yeVxuICAgIGlmIChjbGllbnQpIHtcbiAgICAgICAgY2xpZW50LnRyYWNrVHJhY2UoeyBtZXNzYWdlOiBgW0lORk9dICR7Y2F0ZWdvcnl9IC0gJHtmdWxsTWVzc2FnZX1gIH0pXG4gICAgfVxuICAgIHRoaXMuX2xvZ2dlci5pbmZvKGZ1bGxNZXNzYWdlKVxufVxuXG5mdW5jdGlvbiB3YXJuKC4uLm1lc3NhZ2VzOiBhbnlbXSkge1xuICAgIGxldCBmdWxsTWVzc2FnZSA9ICcnXG5cbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgZnVsbE1lc3NhZ2UgKz0gbWVzc2FnZVxuICAgIH1cblxuICAgIHRoaXMuX2xvZ2dlci53YXJuKGZ1bGxNZXNzYWdlKVxufVxuXG5mdW5jdGlvbiBkZWJ1ZyguLi5tZXNzYWdlczogYW55W10pIHtcbiAgICBsZXQgZnVsbE1lc3NhZ2UgPSAnJ1xuXG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGZ1bGxNZXNzYWdlICs9IG1lc3NhZ2VcbiAgICB9XG4gICAgdGhpcy5fbG9nZ2VyLmRlYnVnKGZ1bGxNZXNzYWdlKVxufVxuXG5mdW5jdGlvbiB0cmFja1JlcXVlc3Qob2JqOiBhbnkpIHtcbiAgICBpZiAoY2xpZW50KSB7XG4gICAgICAgIGNsaWVudC50cmFja1JlcXVlc3Qob2JqKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZXJyb3IoLi4ubWVzc2FnZXM6IGFueVtdKSB7XG4gICAgbGV0IGZ1bGxNZXNzYWdlID0gJydcblxuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcykge1xuICAgICAgICBmdWxsTWVzc2FnZSArPSBtZXNzYWdlXG4gICAgfVxuXG4gICAgY29uc3QgY2F0ZWdvcnkgPSB0aGlzLl9sb2dnZXIuY2F0ZWdvcnlcbiAgICBpZiAoY2xpZW50KSB7XG4gICAgICAgIGNsaWVudC50cmFja0V4Y2VwdGlvbih7IGV4Y2VwdGlvbjogbmV3IEVycm9yKGBbRVJST1JdICR7Y2F0ZWdvcnl9IC0gJHtmdWxsTWVzc2FnZX1gKSB9KVxuICAgIH1cbiAgICB0aGlzLl9sb2dnZXIuZXJyb3IoZnVsbE1lc3NhZ2UpXG5cbiAgICBpZiAoY29uZmlnLmxvZ2dpbmcgPT09ICdkZWJ1ZycgfHwgY29uZmlnLmxvZ2dpbmcgPT09ICdlcnJvcicpIHtcbiAgICAgICAgZXJyb3JTdGFjay5wdXNoKFtjYXRlZ29yeSwgZnVsbE1lc3NhZ2VdKVxuICAgIH1cbn1cblxuIl19