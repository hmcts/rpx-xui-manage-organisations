<table class="{{'govuk-table ' + classes}}" role="presentation">
  <caption class="govuk-table__caption">{{caption}}</caption>
  <thead class="govuk-table__head" >
    <tr class="govuk-table__row">
  @for (h of columnConfig; track trackByColumn($index, h)) {
        <th class="govuk-table__header" scope="col">{{h.header}}</th>
      }
    </tr>
  </thead>
  <tbody class="govuk-table__body">
  @for (r of rows; track trackByRow($index, r)) {
      <tr data-selector="table-row" class="govuk-table__row">
  @for (col of columnConfig; track trackByColumn($index, col); let isFirst = $first) {
          @if (isFirst && firstCellIsHeader) {
            <th data-selector="table-header" class="govuk-table__header" scope="row" >
              @if (!col.type || col.type === 'text' || !r.routerLink) {
                {{r[col.key]}}
              }
              @if (col.type === 'link' && r.routerLink) {
                <a class="govuk-link" [routerLink]="r.routerLink">{{r[col.key]}}</a>
              }
            </th>
          }
          @if (!(isFirst && firstCellIsHeader)) {
            <td data-selector="table-cell" class="govuk-table__cell" >
              @if (col.type === 'link' && r.routerLink) {
                <a class="govuk-link" [routerLink]="r.routerLink">{{r[col.key]}}</a>
              }
              @if (col.type === 'money') {
                -{{ r[col.key] | currency:'GBP' }}
              }
              @if (col.type === 'date') {
                {{formatDate(r[col.key])}}
              }
              @if (col.type === 'dateAtTime') {
                {{formatDateAtTime(r[col.key])}}
              }
              @if (!col.type || col.type === 'text' || !r.routerLink) {
                {{r[col.key]}}
              }
            </td>
          }
        }
      </tr>
    }
  </tbody>
</table>
