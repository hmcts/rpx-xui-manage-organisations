<div [attr.validate]="validate" [attr.data]="data" [attr.group]="group">
  <!--JUI FORM builder component -->
  @if (data.legend) {
    <app-legend [classes]="data.legend.classes">
      {{data.legend.text}}
    </app-legend>
  }
  @if (data.hint) {
    <app-hint [classes]="data.hint.classes">
      {{data.hint.text}}
    </app-hint>
  }
  @if (data.validationError && validate) {
    <app-validation-error-formgroup [group]="group" [validationErrorId]="data.validationError.identifier">
      {{data.validationError.value}}
    </app-validation-error-formgroup>
  }
  @if (data.date) {
    <app-date
      [id]="data.date.formName"
      [data]="data.date"
      [group]="group"
      [validate]="validate"
      [validationError]="data.date.validationError">
    </app-date>
  }
  @if (data.input) {
    <app-inputs
      [item]="data.input"
      [showValidation]="validate"
      [validationError]="data.input.validationError"
      [group]="group"
      [hint]="data.input.hint"
      [label]="data.input.label"
      [labelFor]="data.input.control">
    </app-inputs>
  }
  @if (data.inputButton) {
    <app-input-button
      [item]="data.inputButton"
      [showValidation]="validate"
      [validationErrors]="data.inputButton.validationErrors"
      [group]="group"
      [hint]="data.inputButton.hint"
      [label]="data.inputButton.label"
      [labelFor]="data.inputButton.control"
      (btnClick)="onBtnClick($event)"
      (blurCast)="onBlur($event)">
    </app-input-button>
  }
  @if (data.hiddenInput) {
    <app-hidden-input
      [item]="data.hiddenInput"
      [group]="group"
    [value]="data.hiddenInput.value"></app-hidden-input>
  }
  @if (data.radios) {
    <app-radiobutton [classes]="'govuk-radios ' + data.radios.classes"
      [items]="data.radios.radioGroup"
      [group]="group"
      [control]="data.radios.control"
      [idPrefix]="data.radios.control"
      [validate]="validate"
      [showValidation]="validate"
      [validationError]="data.radios.validationError">
    </app-radiobutton>
  }
  @if (data.checkbox) {
    <div class="govuk-checkboxes">
      <app-checkbox [group]="group"
        [validate]="validate"
        [idPrefix]="data.checkbox.control"
        [items]="data.checkbox"
        [classes]="'govuk-checkboxes__item'"
        [labelClasses]="'govuk-label govuk-checkboxes__label'">
        <div class="govuk-form-group">
          @if (data.checkbox.groups && group.controls[data.checkbox.control].value) {
            <div
              class="govuk-checkboxes__conditional"
              [ngStyle]="{ 'border-left': (validate && group.invalid) ? '5px solid #b10e1e' : '' }">
              @for (subgroup of data.checkbox.groups; track trackByCheckboxSubgroup($index, subgroup)) {
                @if (subgroup.fieldset) {
                  <app-fieldset
                    [validate]="validate"
                    [classes]="'govuk-fieldset'"
                    [group]="group"
                    [data]="subgroup.fieldset"
                    >
                  </app-fieldset>
                }
                <app-jui-form-elements [validate]="validate" [group]="group" [data]="subgroup"></app-jui-form-elements>
              }
            </div>
          }
        </div>
      </app-checkbox>
    </div>
  }

  @if (data.textarea) {
    <app-textareas [classes]="'govuk-textarea'"
      [showValidation]="validate"
      [validationError]="data.textarea.validationError"
      [group]="group"
      [control]="data.textarea.control"
      [label]="data.textarea.label"
      [labelFor]="data.textarea.control"
      [rows]="5">
    </app-textareas>
  }

  @if (data.extension) {
    <app-extensions
      [title]="data.extension.componentDetails.title"
      [text]="data.extension.componentDetails.text"
      [ul]="data.extension.componentDetails.ul">
    </app-extensions>
  }

  @if (data.button) {
    <app-buttons
      [classes]="'govuk-button '+ data.button.classes"
      [typeBtn]="data.button.type"
      [group]="group"
      [control]="data.button.control"
      [value]="data.button.value"
      (btnClick)="onBtnClick($event)">
    </app-buttons>
  }
  <!--JUI FORM builder component -->
</div>
