<ng-container>
  @if (validationError) {
    @if (showValidation) {
      <app-validation-error-formcontrol [group]="group" [controlId]="control">{{validationError.value}}</app-validation-error-formcontrol>
    }
  }
  <div [class]="classes" [formGroup]="group" id="{{control}}">
    @for (data of items; track trackByRadioItem($index, data); let i = $index) {
      @if (data.devider) {
        <div class="govuk-radios__divider">{{data.devider}}</div>
      }
      @if (!data.devider) {
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="{{control + data.value}}" [formControlName]="control" type="radio" [value]= "data.value">
          <label class="govuk-label govuk-radios__label" for="{{control + data.value}}">
            {{data.text}}
          </label>
          @if (data.list) {
            <ul [class]="'govuk-list' + data.list.classes">
              @for (item of data.list.text; track trackByListItem($index, item)) {
                <li>{{ item }}</li>
              }
            </ul>
          }
          @if (data.hint) {
            <app-hint [classes]="data.hint.classes">
              {{data.hint.text}}
            </app-hint>
          }
        </div>
      }
      <div class="govuk-form-group">
        @if (data.groups && group.value[control]===data.value) {
          <div class="govuk-radios__conditional">
            @for (subgroup of data.groups; track trackBySubGroup($index, subgroup)) {
              @if (subgroup.fieldset) {
                <app-fieldset
                  [classes]="'govuk-fieldset'"
                  [group]="group"
                  [data]="subgroup.fieldset"
                  [validate]="validate"
                  >
                </app-fieldset>
              }
              <app-jui-form-elements [validate]="validate" [group]="group" [data]="subgroup"></app-jui-form-elements>
            }
          </div>
        }
      </div>
    }
  </div>
</ng-container>
